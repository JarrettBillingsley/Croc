
<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="text/javascript" http-equiv="content-script-type">
<title>minid.bind</title>
<link rel="stylesheet" type="text/css" href="candydoc/style.css">
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="candydoc/ie56hack.css"><![endif]-->
<script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script>
</head><body>
<div id="tabarea"></div><div id="explorerclient"></div>
<div id="content"><script>explorer.initialize("minid.bind");</script>
	<table class="content">
		<tr><td id="docbody"><h1>minid.bind</h1><!-- Generated by Ddoc from minid\bind.d -->
This module contains scary template stuff to make it possible to wrap D functions,
classes, and structs and expose them as functions and types in MiniD.
<br><br>
<font color=red>BUGS:</font><br>
When wrapping structs, or when using functions which take structs as arguments, if a
struct type has any private fields, it will fail.  Unfortunately D doesn't seem to
provide any way to step around the private members, and also trying to get the .init
of most structs causes a forward declaration error, so it's a bug that forces another
bug.
<br><br>

Arrays of wrapped structs/classes are not yet supported.

<br><br>
<b>License:</b><br>
Copyright (c) 2007 Jarrett Billingsley
<br><br>

This software is provided 'as-is', without any express or implied warranty.
In no event will the authors be held liable for any damages arising from the
use of this software.
<br><br>

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it freely,
subject to the following restrictions:
<br><br>

    1. The origin of this software must not be misrepresented; you must not
	claim that you wrote the original software. If you use this software in a
	product, an acknowledgment in the product documentation would be
	appreciated but is not required.
<br><br>

    2. Altered source versions must be plainly marked as such, and must not
	be misrepresented as being the original software.
<br><br>

    3. This notice may not be removed or altered from any source distribution.
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">struct 
<span class="currsymbol">WrapModule</span>
<script>explorer.outline.addDecl('WrapModule');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Used to wrap a module that is exposed to MiniD.  A module can contain any number of functions, classes, structs,
and other values.  They are added to the module using this struct's methods.
<br><br>
<b>Examples:</b><br>
<pre class="d_code"><u>WrapModule</u>(<font color=red>"foo.bar"</font>, myContext) <font color=green>// name it foo.bar, load it into myContext
</font>	.func!(funcOne)() <font color=green>// wrap native function funcOne; the empty parens here are necessary
</font>	.func!(funcTwo)()
	.custom(<font color=red>"x"</font>, 6)() <font color=green>// set member "x" to the value 6.  This can be any convertible type.
</font>	.type(WrapClass!(MyClass) <font color=green>// wrap the native class MyClass.
</font>		.method!(MyClass.method)() <font color=green>// A method.  Again, the empty parens are necessary.
</font>		.property!(MyClass.property)()); <font color=green>// a property
</font></pre>
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">static WrapModule  
<span class="currsymbol">opCall</span>
<script>explorer.outline.addDecl('opCall');</script>

(char[] <span class="funcparam">name</span>, MDContext <span class="funcparam">context</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Creates an instance of this struct so you can start wrapping a module.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">char[] <span class="funcparam">name</span></td>

               
<td>The <span class="funcparam">name</span> of the module to expose to MiniD.  This can be a multi-part <span class="funcparam">name</span>, with dots (like "foo.bar").</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">MDContext <span class="funcparam">context</span></td>

               
<td>The MiniD <span class="funcparam">context</span> to load this module into.</td></tr>
</table><br>
<b>Returns:</b><br>
An instance of this struct ready to have members added.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">typeof(this) 
<span class="currsymbol">func</span>
<script>explorer.outline.addDecl('func');</script>

(alias f,char[] name = NameOfFunc!(f),funcType = typeof(f))();
<br>typeof(this) 
<span class="currsymbol">
<span class="currsymbol">func</span>
<script>explorer.outline.addDecl('func');</script>

</span>
<script>explorer.outline.addDecl('
<span class="currsymbol">func</span>
<script>explorer.outline.addDecl('func');</script>

');</script>

(alias f,funcType)();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Wrap a function and insert it into this module's namespace.  This must be a non-member D function.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">f</td>

               
<td>An alias to the function you want to wrap.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">name</td>

               
<td>The name to call it in MiniD.  Defaults to the D function name.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">funcType</td>

               
<td>The type of the function to wrap.  This defaults to typeof(f), but you'll need to specify this
			explicitly if you're wrapping an overloaded function, in order to select the proper overload.</td></tr>
</table><br>
<b>Returns:</b><br>
A chaining reference to this module.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">typeof(this) 
<span class="currsymbol">custom</span>
<script>explorer.outline.addDecl('custom');</script>

(T)(char[] <span class="funcparam">name</span>, T <span class="funcparam">value</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Insert an arbitrary key-value pair into the module.  The value can be any convertible type.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">name</td>

               
<td>The name to give this value in the module.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">value</td>

               
<td>The value to insert.</td></tr>
</table><br>
<b>Returns:</b><br>
A chaining reference to this module.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">typeof(this) 
<span class="currsymbol">type</span>
<script>explorer.outline.addDecl('type');</script>

(T)(T <span class="funcparam">value</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Insert a wrapped class or struct 
<span class="currsymbol">type</span>
<script>explorer.outline.addDecl('type');</script>

 into the module.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">value</td>

               
<td>The wrapped class or struct 
<span class="currsymbol">type</span>
<script>explorer.outline.addDecl('type');</script>

 to insert.  This should be an instance of the WrapClass struct, and should have
		already had its members added to it.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">name</td>

               
<td>The name to give this 
<span class="currsymbol">type</span>
<script>explorer.outline.addDecl('type');</script>

 in the MiniD module.  Defaults to "", which means it will use the D name of the 
<span class="currsymbol">type</span>
<script>explorer.outline.addDecl('type');</script>

.</td></tr>
</table><br>
<b>Returns:</b><br>
A chaining reference to this module.
	
<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">struct 
<span class="currsymbol">WrapClass</span>
<script>explorer.outline.addDecl('WrapClass');</script>

(ClassType,Ctors...);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Used to wrap a class or struct type that is exposed to MiniD.  Since classes and structs are very similar, both can be
wrapped by this one template.  They can have any number of constructors, methods, and properties, and structs will have all their
fields wrapped in opIndex and opIndexAssign metamethods so that they can be accessed from within MiniD.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">ClassType</td>

               
<td>The type of the class or struct to wrap.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">Ctors</td>

               
<td>An optional list of function types which represent the constructors (or in the case of structs, static opCalls) which
		should be wrapped.  If this is left out, it will attempt to wrap the default (no-parameter) constructor.</td></tr>
</table><br>
<font color=red>BUGS:</font><br>
As explained in the module header, wrapping structs with private fields fails.  You could try making a wrapper type for it, and
	then wrapping that :X

<br><br>
<b>Examples:</b><br>
<pre class="d_code"><u>WrapClass</u>!(MyClass, <font color=blue>void</font> <font color=blue>function</font>(<font color=blue>int</font>), <font color=blue>void</font> <font color=blue>function</font>(<font color=blue>int</font>, <font color=blue>float</font>)) <font color=green>// class type, followed by ctor types
</font>	.method!(MyClass.methodOne)() <font color=green>// wrap a method
</font>	.property!(MyClass.position)() <font color=green>// wrap a property
</font>.addToNamespace(someNamespace); <font color=green>// register it into a namespace
</font></pre>
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">typeof(*this) 
<span class="currsymbol">opCall</span>
<script>explorer.outline.addDecl('opCall');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Creates an instance of this struct so you can start wrapping your class or struct.
<br><br>
<b>Returns:</b><br>
An instance of this struct.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">template 
<span class="currsymbol">method</span>
<script>explorer.outline.addDecl('method');</script>

(alias func,char[] name = NameOfFunc!(func),funcType = typeof(func))<br>template 
<span class="currsymbol">method</span>
<script>explorer.outline.addDecl('method');</script>

(alias func,funcType)</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Wrap a class or struct 
<span class="currsymbol">method</span>
<script>explorer.outline.addDecl('method');</script>

.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">func</td>

               
<td>An alias to the 
<span class="currsymbol">method</span>
<script>explorer.outline.addDecl('method');</script>

 to wrap.  If your class type is "MyClass" and the 
<span class="currsymbol">method</span>
<script>explorer.outline.addDecl('method');</script>

 is "foo", use "MyClass.foo" (without the quotes)
			as the parameter.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">name</td>

               
<td>The name that should be used on the MiniD side to represent the 
<span class="currsymbol">method</span>
<script>explorer.outline.addDecl('method');</script>

.  Defaults to the D 
<span class="currsymbol">method</span>
<script>explorer.outline.addDecl('method');</script>

 name.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">funcType</td>

               
<td>The type of the 
<span class="currsymbol">method</span>
<script>explorer.outline.addDecl('method');</script>

 to wrap.  This defaults to typeof(func), but you'll need to specify this
			explicitly if you're wrapping an overloaded 
<span class="currsymbol">method</span>
<script>explorer.outline.addDecl('method');</script>

, in order to select the proper overload.</td></tr>
</table><br>
<b>Returns:</b><br>
A chaining reference to this struct.
	
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl></dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">template 
<span class="currsymbol">property</span>
<script>explorer.outline.addDecl('property');</script>

(alias func,char[] name = NameOfFunc!(func),funcType = typeof(func))<br>template 
<span class="currsymbol">property</span>
<script>explorer.outline.addDecl('property');</script>

(alias func,funcType)</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Wrap a 
<span class="currsymbol">property</span>
<script>explorer.outline.addDecl('property');</script>

.  MiniD doesn't have explicit support for properties, but the MiniD standard library follows a certain convention, which is
	compatible with the D 
<span class="currsymbol">property</span>
<script>explorer.outline.addDecl('property');</script>

 convention.  In MiniD, a 
<span class="currsymbol">property</span>
<script>explorer.outline.addDecl('property');</script>

 is represented as a function which sets the value when called with one
	parameter, and which gets the value when called with none, just like in D.  A wrapped 
<span class="currsymbol">property</span>
<script>explorer.outline.addDecl('property');</script>

 will call the getter and/or setter appropriately
	when used from MiniD.  The getter and setter are automatically determined, so you don't have to wrap them separately.  It will also work if
	your 
<span class="currsymbol">property</span>
<script>explorer.outline.addDecl('property');</script>

 is read-only or write-only.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">func</td>

               
<td>An alias to the 
<span class="currsymbol">property</span>
<script>explorer.outline.addDecl('property');</script>

 to wrap, just like with method wrapping.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">name</td>

               
<td>The name that should be used on the MiniD side to represent the 
<span class="currsymbol">property</span>
<script>explorer.outline.addDecl('property');</script>

.  Defaults to the D 
<span class="currsymbol">property</span>
<script>explorer.outline.addDecl('property');</script>

 name.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">funcType</td>

               
<td>The type of the 
<span class="currsymbol">property</span>
<script>explorer.outline.addDecl('property');</script>

 to wrap.  This defaults to typeof(func), but you might have to use an explicit type if you have
			another class method with the same name as the 
<span class="currsymbol">property</span>
<script>explorer.outline.addDecl('property');</script>

 but with a different number of parameters.  This can be either
			the type of the setter or the getter.</td></tr>
</table><br>
<b>Returns:</b><br>
A chaining reference to this struct.
	
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl></dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">void 
<span class="currsymbol">makeGlobal</span>
<script>explorer.outline.addDecl('makeGlobal');</script>

(MDContext <span class="funcparam">ctx</span>, dchar[] <span class="funcparam">name</span> = "");
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Registers this class as a global variable in the given context.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">MDContext <span class="funcparam">ctx</span></td>

               
<td>The context to load this class into.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">dchar[] <span class="funcparam">name</span></td>

               
<td>The <span class="funcparam">name</span> to give the class in MiniD.  Defaults to "", which means the class's D <span class="funcparam">name</span> will be used as the MiniD <span class="funcparam">name</span>.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">void 
<span class="currsymbol">addToNamespace</span>
<script>explorer.outline.addDecl('addToNamespace');</script>

(MDNamespace <span class="funcparam">ns</span>, dchar[] <span class="funcparam">name</span> = "");
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Adds this class to some namespace.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">MDNamespace <span class="funcparam">ns</span></td>

               
<td>The namespace to put this class in.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">dchar[] <span class="funcparam">name</span></td>

               
<td>The <span class="funcparam">name</span> to give the class in MiniD.  Defaults to "", which means the class's D <span class="funcparam">name</span> will be used as the MiniD <span class="funcparam">name</span>.</td></tr>
</table><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">void 
<span class="currsymbol">WrapFunc</span>
<script>explorer.outline.addDecl('WrapFunc');</script>

(alias func,char[] name = NameOfFunc!(func),funcType = typeof(&amp;func))(MDNamespace <span class="funcparam">ns</span>);
<br>template 
<span class="currsymbol">WrapFunc</span>
<script>explorer.outline.addDecl('WrapFunc');</script>

(alias func,funcType)</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Wraps a free function and places it into a given namespace.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">func</td>

               
<td>An alias to the function you want to wrap.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">name</td>

               
<td>The name to call it in MiniD.  Defaults to the D function name.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">funcType</td>

               
<td>The type of the function to wrap.  This defaults to typeof(func), but you'll need to specify this
		explicitly if you're wrapping an overloaded function, in order to select the proper overload.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">ns</td>

               
<td>The namespace to put the function in.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">void 
<span class="currsymbol">WrapGlobalFunc</span>
<script>explorer.outline.addDecl('WrapGlobalFunc');</script>

(alias func,char[] name = NameOfFunc!(func),funcType = typeof(&amp;func))(MDContext <span class="funcparam">context</span>);
<br>template 
<span class="currsymbol">WrapGlobalFunc</span>
<script>explorer.outline.addDecl('WrapGlobalFunc');</script>

(alias func,funcType)</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Wraps a free function and places it into the global namespace of a given context.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">func</td>

               
<td>An alias to the function you want to wrap.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">name</td>

               
<td>The name to call it in MiniD.  Defaults to the D function name.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">funcType</td>

               
<td>The type of the function to wrap.  This defaults to typeof(func), but you'll need to specify this
		explicitly if you're wrapping an overloaded function, in order to select the proper overload.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">context</td>

               
<td>The context into whose global namespace this function will be placed.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">template 
<span class="currsymbol">MinArgs</span>
<script>explorer.outline.addDecl('MinArgs');</script>

(alias func,funcType = void)</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Given an alias to a function, this metafunction will give the minimum legal number of arguments it can be called with.
Even works for aliases to class methods.
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl></dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">template 
<span class="currsymbol">InitsOf</span>
<script>explorer.outline.addDecl('InitsOf');</script>

(T...)</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Given a type tuple, this metafunction will give an expression tuple of all the .init values for each type.
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl></dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">template 
<span class="currsymbol">FieldNames</span>
<script>explorer.outline.addDecl('FieldNames');</script>

(S,int idx = 0)</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Given a struct type, gives a tuple of strings of the names of fields in the struct.
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl></dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</td></tr>
		<tr><td id="docfooter">
			Page was generated with
			<img src="candydoc/img/candydoc.gif" style="vertical-align:middle; position:relative; top:-1px">
			on Sun Nov 18 11:04:09 2007

		</td></tr>
	</table>
</div>
<script>
	explorer.packageExplorer.addModuleFull("minid.minid");
	explorer.packageExplorer.addModuleFull("minid.types");
	explorer.packageExplorer.addModuleFull("minid.bind");
	explorer.packageExplorer.addModuleFull("minid.compiler");
	explorer.packageExplorer.addModuleFull("minid.utils");</script>
</body></html>


