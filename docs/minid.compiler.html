
<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="text/javascript" http-equiv="content-script-type">
<title>minid.compiler</title>
<link rel="stylesheet" type="text/css" href="candydoc/style.css">
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="candydoc/ie56hack.css"><![endif]-->
<script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script>
</head><body>
<div id="tabarea"></div><div id="explorerclient"></div>
<div id="content"><script>explorer.initialize("minid.compiler");</script>
	<table class="content">
		<tr><td id="docbody"><h1>minid.compiler</h1><!-- Generated by Ddoc from minid\compiler.d -->
This module contains the public interface to the MiniD 
<span class="currsymbol">compiler</span>
<script>explorer.outline.addDecl('compiler');</script>

.
<br><br>
<b>License:</b><br><pre class="license">Copyright (c) 2008 Jarrett Billingsley
<br><br>

This software is provided 'as-is', without any express or implied warranty.
In no event will the authors be held liable for any damages arising from the
use of this software.
<br><br>

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it freely,
subject to the following restrictions:
<br><br>

    1. The origin of this software must not be misrepresented; you must not
	claim that you wrote the original software. If you use this software in a
	product, an acknowledgment in the product documentation would be
	appreciated but is not required.
<br><br>

    2. Altered source versions must be plainly marked as such, and must not
	be misrepresented as being the original software.
<br><br>

    3. This notice may not be removed or altered from any source distribution.
</pre><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">class 
<span class="currsymbol">Compiler</span>
<script>explorer.outline.addDecl('Compiler');</script>

: minid.compilertypes.ICompiler;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>This class encapsulates all the functionality needed for compiling MiniD code.
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">None</span>
<script>explorer.outline.addDecl('None');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Do not generate code for any optional features.
		
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">TypeConstraints</span>
<script>explorer.outline.addDecl('TypeConstraints');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Generate code to check parameter type constraints.
		
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">Asserts</span>
<script>explorer.outline.addDecl('Asserts');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Generate code for assert statements.
		
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">Debug</span>
<script>explorer.outline.addDecl('Debug');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Generate debug info.  Currently always on.
		
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">All</span>
<script>explorer.outline.addDecl('All');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Generate code for all optional features.
		
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">this(MDThread* <span class="funcparam">t</span>, uint <span class="funcparam">flags</span> = All);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Constructs a compiler.  The given thread will be used to hold temporary data structures,
	to throw exceptions, and to return the functions that result from compilation.
<br><br>
<b>Params:</b><br><table class="params"><tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">MDThread* <span class="funcparam">t</span></td>

               
<td>The thread with which this compiler will be associated.</td></tr>
<tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">uint <span class="funcparam">flags</span></td>

               
<td>A bitwise or of any code-generation <span class="funcparam">flags</span> you want to use for this compiler.
			Defaults to All.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">void 
<span class="currsymbol">setFlags</span>
<script>explorer.outline.addDecl('setFlags');</script>

(uint <span class="funcparam">flags</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Set the compiler's code-generation <span class="funcparam">flags</span>.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">bool 
<span class="currsymbol">asserts</span>
<script>explorer.outline.addDecl('asserts');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Returns whether or not code for 
<span class="currsymbol">asserts</span>
<script>explorer.outline.addDecl('asserts');</script>

 should be generated.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">bool 
<span class="currsymbol">typeConstraints</span>
<script>explorer.outline.addDecl('typeConstraints');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Returns whether or not code for parameter type constraint checking should be generated.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">bool 
<span class="currsymbol">isEof</span>
<script>explorer.outline.addDecl('isEof');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Returns whether or not the most recently-thrown exception was thrown due to an unexpected end-of-file.
	As an example, this is used by MDCL (that is, minid.commandline) to detect when more code must be entered
	to complete a code segment.  A simple example of use:
<br><br>
<pre class="d_code"><pre class="d_keyword">scope</pre> c = <pre class="d_keyword">new</pre> Compiler(t);

<pre class="d_keyword">try</pre>
	c.compileExpression(someCode, <pre class="d_string">"test"</pre>);
<pre class="d_keyword">catch</pre>(MDException e)
{
	<pre class="d_keyword">auto</pre> ex = catchException(t);

	<pre class="d_keyword">if</pre>(c.<pre class="d_psymbol">isEof</pre>())
	{
		<pre class="d_comment">// error was caused by an unexpected end-of-file
</pre>	}
}
</pre>
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">bool 
<span class="currsymbol">isLoneStmt</span>
<script>explorer.outline.addDecl('isLoneStmt');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Returns whether or not the most recently-thrown exception was thrown due to a no-effect expression being used
	as a statement (yes, this method has a horrible name).  Its use is identical to isEof().
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">int 
<span class="currsymbol">compileModule</span>
<script>explorer.outline.addDecl('compileModule');</script>

(char[] <span class="funcparam">filename</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Compile a source code file into a function closure.  Takes the path to the source file, compiles
	that file, and pushes the top-level closure onto the stack.  The environment of the closure is
	just set to the global namespace of the compiler's thread; you must create and set a namespace
	for the module function before calling it.
<br><br>
You shouldn't have to deal with this function that much.  Most of the time the compilation of
	modules should be handled for you by the import system.

<br><br>
<b>Params:</b><br><table class="params"><tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">char[] <span class="funcparam">filename</span></td>

               
<td>The <span class="funcparam">filename</span> of the source file to compile.</td></tr>
</table><br>
<b>Returns:</b><br>
The stack index of the newly-pushed function closure that represents the top-level function
		of the module.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">int 
<span class="currsymbol">compileModule</span>
<script>explorer.outline.addDecl('compileModule');</script>

(char[] <span class="funcparam">source</span>, char[] <span class="funcparam">name</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Same as above, but compiles from a string holding the <span class="funcparam">source</span> rather than from a file.
<br><br>
<b>Params:</b><br><table class="params"><tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">char[] <span class="funcparam">source</span></td>

               
<td>The <span class="funcparam">source</span> code as a string.</td></tr>
<tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">char[] <span class="funcparam">name</span></td>

               
<td>The <span class="funcparam">name</span> which should be used as the <span class="funcparam">source</span> <span class="funcparam">name</span> in compiler error message.  Takes the
			place of the filename when compiling from a <span class="funcparam">source</span> file.</td></tr>
</table><br>
<b>Returns:</b><br>
The stack index of the newly-pushed function closure that represents the top-level function
		of the module.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">int 
<span class="currsymbol">compileStatements</span>
<script>explorer.outline.addDecl('compileStatements');</script>

(char[] <span class="funcparam">source</span>, char[] <span class="funcparam">name</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Compile a list of statements into a function which takes a variadic number of arguments.  The environment
	of the compiled function closure is set to the globals of the compiler's thread.
<br><br>
<b>Params:</b><br><table class="params"><tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">char[] <span class="funcparam">source</span></td>

               
<td>The <span class="funcparam">source</span> code as a string.</td></tr>
<tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">char[] <span class="funcparam">name</span></td>

               
<td>The <span class="funcparam">name</span> to use as the <span class="funcparam">source</span> <span class="funcparam">name</span> for compilation errors.</td></tr>
</table><br>
<b>Returns:</b><br>
The stack index of the newly-pushed function closure.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">int 
<span class="currsymbol">compileExpression</span>
<script>explorer.outline.addDecl('compileExpression');</script>

(char[] <span class="funcparam">source</span>, char[] <span class="funcparam">name</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Compile a single expression into a function which returns the value of that expression when called.
<br><br>
<b>Params:</b><br><table class="params"><tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">char[] <span class="funcparam">source</span></td>

               
<td>The <span class="funcparam">source</span> code as a string.</td></tr>
<tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">char[] <span class="funcparam">name</span></td>

               
<td>The <span class="funcparam">name</span> to use as the <span class="funcparam">source</span> <span class="funcparam">name</span> for compilation errors.</td></tr>
</table><br>
<b>Returns:</b><br>
The stack index of the newly-pushed function closure.
	
<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</td></tr>
		<tr><td id="docfooter">
			Page was generated with
			<img src="candydoc/img/candydoc.gif" style="vertical-align:middle; position:relative; top:-1px">
			on Thu Jul 16 22:47:48 2009

		</td></tr>
	</table>
</div>
<script>
	explorer.packageExplorer.addModuleFull("minid.alloc");
	explorer.packageExplorer.addModuleFull("minid.api");
	explorer.packageExplorer.addModuleFull("minid.ast");
	explorer.packageExplorer.addModuleFull("minid.bind");
	explorer.packageExplorer.addModuleFull("minid.commandline");
	explorer.packageExplorer.addModuleFull("minid.compiler");
	explorer.packageExplorer.addModuleFull("minid.ex");
	explorer.packageExplorer.addModuleFull("minid.interpreter");
	explorer.packageExplorer.addModuleFull("minid.serialization");
	explorer.packageExplorer.addModuleFull("minid.types");
	explorer.packageExplorer.addModuleFull("minid.utils");
	explorer.packageExplorer.addModuleFull("minid.vm");</script>
</body></html>


