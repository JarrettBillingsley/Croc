
<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="text/javascript" http-equiv="content-script-type">
<title>minid.minid</title>
<link rel="stylesheet" type="text/css" href="candydoc/style.css">
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="candydoc/ie56hack.css"><![endif]-->
<script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script>
</head><body>
<div id="tabarea"></div><div id="explorerclient"></div>
<div id="content"><script>explorer.initialize("minid.minid");</script>
	<table class="content">
		<tr><td id="docbody"><h1>minid.minid</h1><!-- Generated by Ddoc from minid\minid.d -->
This module holds some useful API functions that don't fit anywhere else.  This
also holds the important NewContext function, which is how you create a MiniD
interpreter to use in your app.
<br><br>
<b>License:</b><br>
Copyright (c) 2007 Jarrett Billingsley
<br><br>

This software is provided 'as-is', without any express or implied warranty.
In no event will the authors be held liable for any damages arising from the
use of this software.
<br><br>

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it freely,
subject to the following restrictions:
<br><br>

    1. The origin of this software must not be misrepresented; you must not
	claim that you wrote the original software. If you use this software in a
	product, an acknowledgment in the product documentation would be
	appreciated but is not required.
<br><br>

    2. Altered source versions must be plainly marked as such, and must not
	be misrepresented as being the original software.
<br><br>

    3. This notice may not be removed or altered from any source distribution.
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">enum 
<span class="currsymbol">MDStdlib</span>
<script>explorer.outline.addDecl('MDStdlib');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>This enumeration is used with the NewContext function to specify which standard libraries you
want to load into the new context.  The base library is always loaded, so there is no
flag for it.  You can choose which libraries you want to load by ORing together multiple
flags.
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">None</span>
<script>explorer.outline.addDecl('None');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Nothing but the base library will be loaded if you specify this flag.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">Array</span>
<script>explorer.outline.addDecl('Array');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>
<span class="currsymbol">Array</span>
<script>explorer.outline.addDecl('Array');</script>

 manipulation.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">Char</span>
<script>explorer.outline.addDecl('Char');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Character classification.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">IO</span>
<script>explorer.outline.addDecl('IO');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Stream-based input and output.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">Math</span>
<script>explorer.outline.addDecl('Math');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Standard math functions.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">String</span>
<script>explorer.outline.addDecl('String');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>
<span class="currsymbol">String</span>
<script>explorer.outline.addDecl('String');</script>

 manipulation.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">Table</span>
<script>explorer.outline.addDecl('Table');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>
<span class="currsymbol">Table</span>
<script>explorer.outline.addDecl('Table');</script>

 manipulation.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">OS</span>
<script>explorer.outline.addDecl('OS');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>
<span class="currsymbol">OS</span>
<script>explorer.outline.addDecl('OS');</script>

-specific functionality.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">Regexp</span>
<script>explorer.outline.addDecl('Regexp');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Regular expressions.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">Safe</span>
<script>explorer.outline.addDecl('Safe');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>This flag is an OR of Array, Char, Math, String, Table, and Regexp.  It represents all
	the libraries which are "safe", i.e. malicious scripts would not be able to use the IO
	or OS libraries to do bad things.
	
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">
<span class="currsymbol">All</span>
<script>explorer.outline.addDecl('All');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>
<span class="currsymbol">All</span>
<script>explorer.outline.addDecl('All');</script>

 available standard libraries.
	
<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">MDContext 
<span class="currsymbol">NewContext</span>
<script>explorer.outline.addDecl('NewContext');</script>

(uint <span class="funcparam">libs</span> = cast(uint)255);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Initializes a new MiniD context and loads any specified standard libraries into it.  Each new
context is also given a new MDState as its main thread.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">uint <span class="funcparam">libs</span></td>

               
<td>An ORing together of any standard libraries you want to load (see the MDStdlib enum).
	Defaults to MDStdlib.All.</td></tr>
</table><br>
<b>Returns:</b><br>
The newly-created context, into which you can import code and from which you can get the main
	thread to run code.
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">MDNamespace 
<span class="currsymbol">loadModuleString</span>
<script>explorer.outline.addDecl('loadModuleString');</script>

(MDState <span class="funcparam">s</span>, dchar[] <span class="funcparam">source</span>, MDValue [] <span class="funcparam">params</span> = null, char[] <span class="funcparam">name</span> = "&lt;module string&gt;");
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Compiles and initializes a module from a string, rather than loading one from a file.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">MDState <span class="funcparam">s</span></td>

               
<td>The state that will be used to initialize the module after it has been compiled.
		The module will be loaded into the global namespace of this state'<span class="funcparam">s</span> context as well.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">dchar[] <span class="funcparam">source</span></td>

               
<td>The <span class="funcparam">source</span> code of the module, exactly as it would appear in a file.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">MDValue [] <span class="funcparam">params</span></td>

               
<td>An optional list of parameters.  These are passed as the variadic parameters
		to the top-level module function.  Defaults to <b>null</b> (no parameters).</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">char[] <span class="funcparam">name</span></td>

               
<td>The <span class="funcparam">name</span> which takes the place of the filename, used by the compiler to report
		error messages.  Defaults to "&lt;module string&gt;".</td></tr>
</table><br>
<b>Returns:</b><br>
The top-level namespace of the module.
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">uint 
<span class="currsymbol">loadStatementString</span>
<script>explorer.outline.addDecl('loadStatementString');</script>

(MDState <span class="funcparam">s</span>, dchar[] <span class="funcparam">source</span>, MDNamespace <span class="funcparam">ns</span> = cast(MDNamespace)null, MDValue [] <span class="funcparam">params</span> = null, char[] <span class="funcparam">name</span> = "&lt;statement string&gt;");
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Compiles a string containing a list of statements into a variadic function, calls it, and
returns the number of results that the function returned (which can be popped off the provided
state'<span class="funcparam">s</span> stack).  This is equivalent to the "loadString" baselib function in MiniD.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">MDState <span class="funcparam">s</span></td>

               
<td>The state that will be used to execute the resulting function.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">dchar[] <span class="funcparam">source</span></td>

               
<td>The <span class="funcparam">source</span> code to be compiled.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">MDNamespace <span class="funcparam">ns</span></td>

               
<td>The namespace which will be used as the context in which the statements will be evaluated.
		Defaults to the global namespace of the state'<span class="funcparam">s</span> owning context.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">MDValue [] <span class="funcparam">params</span></td>

               
<td>An optional list of parameters.  These are passed as the variadic parameters
		to the compiled function.  Defaults to <b>null</b> (no parameters).</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">char[] <span class="funcparam">name</span></td>

               
<td>The <span class="funcparam">name</span> which takes the place of the filename, used by the compiler to report
		error messages.  Also used as the <span class="funcparam">name</span> of the function, used when reporting runtime
		errors.  Defaults to "&lt;statement string&gt;".</td></tr>
</table><br>
<b>Returns:</b><br>
The number of return values which the compiled function has returned.  These can then be
	popped off the execution stack of the state that was passed in as the first parameter.
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">MDValue  
<span class="currsymbol">eval</span>
<script>explorer.outline.addDecl('eval');</script>

(MDState <span class="funcparam">s</span>, dchar[] <span class="funcparam">source</span>, MDNamespace <span class="funcparam">ns</span> = cast(MDNamespace)null);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Compile and evaluate a MiniD expression, and get the result.  This is the equivalent of the "
<span class="currsymbol">eval</span>
<script>explorer.outline.addDecl('eval');</script>

"
baselib function in MiniD.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">MDState <span class="funcparam">s</span></td>

               
<td>The state that will be used to run the compiled expression.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">dchar[] <span class="funcparam">source</span></td>

               
<td>The string that holds the expression.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">MDNamespace <span class="funcparam">ns</span></td>

               
<td>The namespace which will be used as the context in which the expression will be evaluated.
		Defaults to the global namespace of the state'<span class="funcparam">s</span> owning context.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">template 
<span class="currsymbol">toJSON</span>
<script>explorer.outline.addDecl('toJSON');</script>

(U)<br>alias 
<span class="currsymbol">toJSONc</span>
<script>explorer.outline.addDecl('toJSONc');</script>

;
<br>alias 
<span class="currsymbol">toJSONw</span>
<script>explorer.outline.addDecl('toJSONw');</script>

;
<br>alias 
<span class="currsymbol">toJSONd</span>
<script>explorer.outline.addDecl('toJSONd');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Convert a table or an array object into JSON format.  This will work with MDTable, MDArray, or any
convertible D array or AA type.  Returns a string containing the JSON data.  If you have the need
for converting lots of things to JSON, or for writing JSON to some kind of output, use the writeJSON
function instead, as it lets you specify a place to put the resulting data, rather than allocating
its own destination.
<br><br>
This function is inside a template which is parameterized on the return type, or rather, the character
type of the return string type.  You can call it either as 
<span class="currsymbol">toJSON</span>
<script>explorer.outline.addDecl('toJSON');</script>

!(T)(...) where T is one of char,
wchar, or dchar, or you can call it using the aliases toJSONc, toJSONw, and toJSONd.

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">r</td>

               
<td>The root of the data.  Must be an MDTable, MDArray, or any convertible D array or AA type.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">pretty</td>

               
<td>If <b>true</b>, inserts newlines and indentation in the output to make it more human-readable.
		If <b>false</b>, elides all nonsignificant whitespace to make it as short as possible for transmission.
		Defaults to <b>false</b>.</td></tr>
</table><br>
<b>Returns:</b><br>
The converted data as a string.
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl></dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">template 
<span class="currsymbol">writeJSON</span>
<script>explorer.outline.addDecl('writeJSON');</script>

(U)<br>alias 
<span class="currsymbol">writeJSONc</span>
<script>explorer.outline.addDecl('writeJSONc');</script>

;
<br>alias 
<span class="currsymbol">writeJSONw</span>
<script>explorer.outline.addDecl('writeJSONw');</script>

;
<br>alias 
<span class="currsymbol">writeJSONd</span>
<script>explorer.outline.addDecl('writeJSONd');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Similar to toJSON, but instead of creating a string for the output and returning that, this allows you
to specify a Print instance that will be used to output the JSON as it's generated.  Note that if there's
an error during conversion, some of the data will have been printed already, so it's up to you to make sure
that any unwanted data is cleaned up.
<br><br>
Just like toJSON, this is parameterized on the character type of the output, and can be called either as

<span class="currsymbol">writeJSON</span>
<script>explorer.outline.addDecl('writeJSON');</script>

!(T)(...) or as one of the aliases.

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">printer</td>

               
<td>An instance of a Print parameterized on the type of the output.  This is where the JSON will
		be sent as it's being generated.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">r</td>

               
<td>The root of the data.  Must be an MDTable, MDArray, or any convertible D array or AA type.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">pretty</td>

               
<td>If <b>true</b>, inserts newlines and indentation in the output to make it more human-readable.
		If <b>false</b>, elides all nonsignificant whitespace to make it as short as possible for transmission.
		Defaults to <b>false</b>.</td></tr>
</table><br>
<b>Examples:</b><br>
<pre class="d_code"><font color=blue>import</font> tango.io.Stdout;

...

<font color=green>// Stdout is a Print!(char) instance, so we use the char version of writeJSON.
</font><font color=green>// We could also write "writeJSON!(char)(...)" here.
</font>writeJSONc(Stdout, [<font color=red>"hi"</font>[]: 3, <font color=red>"bye"</font>: 6]);
</pre>
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl></dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</td></tr>
		<tr><td id="docfooter">
			Page was generated with
			<img src="candydoc/img/candydoc.gif" style="vertical-align:middle; position:relative; top:-1px">
			on Sun Nov 18 11:04:08 2007

		</td></tr>
	</table>
</div>
<script>
	explorer.packageExplorer.addModuleFull("minid.minid");
	explorer.packageExplorer.addModuleFull("minid.types");
	explorer.packageExplorer.addModuleFull("minid.bind");
	explorer.packageExplorer.addModuleFull("minid.compiler");
	explorer.packageExplorer.addModuleFull("minid.utils");</script>
</body></html>


