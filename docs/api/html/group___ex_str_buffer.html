<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Croc: StrBuffer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="crocstyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="container">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<img src="http://jfbillingsley.com/croc/chrome/site/banner.gif" alt="The Croc Programming Language" />
<!-- <table cellspacing="0" cellpadding="0"> -->
 <!-- <tbody> -->
 <!-- <tr style="height: 56px;"> -->
  <!-- <td style="padding-left: 0.5em;"> -->
   <!-- <div id="projectname">Croc -->
   <!-- </div> -->
   <!--<div id="projectbrief">The Croc Programming Language</div>-->
  <!-- </td> -->
 <!-- </tr> -->
 <!-- </tbody> -->
<!-- </table> -->
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>API</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">StrBuffer<div class="ingroups"><a class="el" href="group___ex.html">Extended API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:struct_croc_str_buffer"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a></td></tr>
<tr class="separator:struct_croc_str_buffer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3326d858e73103ad0399948d8e289e8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ex_str_buffer.html#ga3326d858e73103ad0399948d8e289e8a">croc_ex_buffer_init</a> (<a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *t, <a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *b)</td></tr>
<tr class="separator:ga3326d858e73103ad0399948d8e289e8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f48e1112e60d6ec16397ef9e65ddc6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ex_str_buffer.html#ga3f48e1112e60d6ec16397ef9e65ddc6e">croc_ex_buffer_addChar</a> (<a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *b, <a class="el" href="group___a_p_i_types.html#ga1715715f9e1071391dff31b5c48ef945">crocchar_t</a> c)</td></tr>
<tr class="separator:ga3f48e1112e60d6ec16397ef9e65ddc6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga29209ebd76ac02bd9b181815e9ecd68e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ex_str_buffer.html#ga29209ebd76ac02bd9b181815e9ecd68e">croc_ex_buffer_addString</a> (<a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *b, const char *s)</td></tr>
<tr class="separator:ga29209ebd76ac02bd9b181815e9ecd68e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5380835c72e8aacfd1c065c01aaa78ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ex_str_buffer.html#ga5380835c72e8aacfd1c065c01aaa78ff">croc_ex_buffer_addStringn</a> (<a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *b, const char *s, <a class="el" href="group___a_p_i_types.html#gadcf7542809ee167fbe38441459138101">uword_t</a> len)</td></tr>
<tr class="separator:ga5380835c72e8aacfd1c065c01aaa78ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0bb076ed12b870f81b80f3de716f7d6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ex_str_buffer.html#ga0bb076ed12b870f81b80f3de716f7d6f">croc_ex_buffer_addTop</a> (<a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *b)</td></tr>
<tr class="separator:ga0bb076ed12b870f81b80f3de716f7d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae0827c8818825ffb9005148984327406"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ex_str_buffer.html#gae0827c8818825ffb9005148984327406">croc_ex_buffer_finish</a> (<a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *b)</td></tr>
<tr class="separator:gae0827c8818825ffb9005148984327406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga559e0d37c6e3dfb6bfc2b061a070ed8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ex_str_buffer.html#ga559e0d37c6e3dfb6bfc2b061a070ed8f">croc_ex_buffer_start</a> (<a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *b)</td></tr>
<tr class="separator:ga559e0d37c6e3dfb6bfc2b061a070ed8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e5b0e4e15d5497c17b972d34126a715"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ex_str_buffer.html#ga1e5b0e4e15d5497c17b972d34126a715">croc_ex_buffer_prepare</a> (<a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *b, <a class="el" href="group___a_p_i_types.html#gadcf7542809ee167fbe38441459138101">uword_t</a> size)</td></tr>
<tr class="separator:ga1e5b0e4e15d5497c17b972d34126a715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3d4886e942f283949cef041c8c295583"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ex_str_buffer.html#ga3d4886e942f283949cef041c8c295583">croc_ex_buffer_addPrepared</a> (<a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *b)</td></tr>
<tr class="separator:ga3d4886e942f283949cef041c8c295583"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A way of building up strings piecewise. </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="struct_croc_str_buffer" id="struct_croc_str_buffer"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct CrocStrBuffer</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>A structure used for building strings up piecewise. </p>
<p>Although the members are defined so you can allocate this structure on the stack, treat it as if it were an opaque type! Only pass it to the buffer functions. </p>
</div>
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga3326d858e73103ad0399948d8e289e8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void croc_ex_buffer_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a <a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a>. </p>
<p>Using a <code>CrocStrBuffer</code> goes something like this:</p>
<ol type="1">
<li>Declare a <code>CrocStrBuffer</code> variable.</li>
<li>Initialize it with this function.</li>
<li>Add pieces to it with the various other functions.</li>
<li>When you're done building your string, call <a class="el" href="group___ex_str_buffer.html#gae0827c8818825ffb9005148984327406">croc_ex_buffer_finish</a> on it, which will leave the resulting string on top of the stack.</li>
</ol>
<p>So for example:</p>
<div class="fragment"><div class="line"><a class="code" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> b;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Start!</span></div>
<div class="line"><a class="code" href="group___ex_str_buffer.html#ga3326d858e73103ad0399948d8e289e8a">croc_ex_buffer_init</a>(t, &amp;b);</div>
<div class="line"><a class="code" href="group___ex_str_buffer.html#ga29209ebd76ac02bd9b181815e9ecd68e">croc_ex_buffer_addString</a>(&amp;b, <span class="stringliteral">&quot;Hello&quot;</span>);</div>
<div class="line"><a class="code" href="group___ex_str_buffer.html#ga3f48e1112e60d6ec16397ef9e65ddc6e">croc_ex_buffer_addChar</a>(&amp;b, <span class="charliteral">&#39;,&#39;</span>);</div>
<div class="line"><a class="code" href="group___value_types.html#ga5402e81ac342c23568488d0ec2f698e0">croc_pushString</a>(t, <span class="stringliteral">&quot; world!&quot;</span>);</div>
<div class="line"><a class="code" href="group___ex_str_buffer.html#ga0bb076ed12b870f81b80f3de716f7d6f">croc_ex_buffer_addTop</a>(&amp;b);</div>
<div class="line"><a class="code" href="group___ex_str_buffer.html#gae0827c8818825ffb9005148984327406">croc_ex_buffer_finish</a>(&amp;b);</div>
<div class="line"><span class="comment">// Now there is only one more stack slot than what we started with, and it contains the string &quot;Hello, world!&quot;.</span></div>
</div><!-- fragment --><p>Note that <code>croc_ex_buffer_init</code> pushes a stack slot for use by the buffer which is used until <code>croc_ex_buffer_finish</code> is called. You shouldn't remove or modify this slot, and you shouldn't remove stack slots below it either (or else things will get messed up). You can, however, push and pop stack slots above this slot freely. </p>

</div>
</div>
<a class="anchor" id="ga3f48e1112e60d6ec16397ef9e65ddc6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void croc_ex_buffer_addChar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___a_p_i_types.html#ga1715715f9e1071391dff31b5c48ef945">crocchar_t</a>&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a single Unicode codepoint to <code>b</code>. </p>

</div>
</div>
<a class="anchor" id="ga29209ebd76ac02bd9b181815e9ecd68e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void croc_ex_buffer_addString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a zero-terminated string to <code>b</code>. </p>

</div>
</div>
<a class="anchor" id="ga5380835c72e8aacfd1c065c01aaa78ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void croc_ex_buffer_addStringn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___a_p_i_types.html#gadcf7542809ee167fbe38441459138101">uword_t</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a string of length <code>len</code> to <code>b</code>. </p>

</div>
</div>
<a class="anchor" id="ga0bb076ed12b870f81b80f3de716f7d6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void croc_ex_buffer_addTop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expects a single string on top of the stack, pops it, and adds it to <code>b</code>. </p>

</div>
</div>
<a class="anchor" id="gae0827c8818825ffb9005148984327406"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a> croc_ex_buffer_finish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finishes building the string. </p>
<p>The stack should be in the same configuration as it was right after the corresponding <a class="el" href="group___ex_str_buffer.html#ga3326d858e73103ad0399948d8e289e8a">croc_ex_buffer_init</a> call. The bookkeeping slot is removed and the result string is pushed in its place.</p>
<p>After this is called, the buffer can be reused to build a new string by calling <a class="el" href="group___ex_str_buffer.html#ga559e0d37c6e3dfb6bfc2b061a070ed8f">croc_ex_buffer_start</a> on it.</p>
<dl class="section return"><dt>Returns</dt><dd>the stack index of the result string. </dd></dl>

</div>
</div>
<a class="anchor" id="ga559e0d37c6e3dfb6bfc2b061a070ed8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void croc_ex_buffer_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>After building up a string and calling <a class="el" href="group___ex_str_buffer.html#gae0827c8818825ffb9005148984327406">croc_ex_buffer_finish</a> on a buffer <code>b</code>, you can start building a new string with the same buffer object by calling this. </p>

</div>
</div>
<a class="anchor" id="ga1e5b0e4e15d5497c17b972d34126a715"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* croc_ex_buffer_prepare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___a_p_i_types.html#gadcf7542809ee167fbe38441459138101">uword_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepares a memory area of <code>size</code> bytes for you to write raw string data into. </p>
<p>When you call this function on a buffer, <b>you cannot call any of the other functions on it until you call <a class="el" href="group___ex_str_buffer.html#ga3d4886e942f283949cef041c8c295583">croc_ex_buffer_addPrepared</a>.</b> It places the buffer into a special mode, and in addition, may push a value onto the stack. Just like with the buffer's bookkeeping slot, do not modify, remove, or change the position of this slot.</p>
<dl class="section return"><dt>Returns</dt><dd>a pointer to a memory area of <code>size</code> bytes which you are expected to fill with string data.</dd></dl>
<p><b>The pointer returned from this may point into Croc's memory. Do not store the pointer! Just keep it long enough to fill the area with data and call <a class="el" href="group___ex_str_buffer.html#ga3d4886e942f283949cef041c8c295583">croc_ex_buffer_addPrepared</a>.</b> </p>

</div>
</div>
<a class="anchor" id="ga3d4886e942f283949cef041c8c295583"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void croc_ex_buffer_addPrepared </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___ex_str_buffer.html#struct_croc_str_buffer">CrocStrBuffer</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds the memory area that was returned by <a class="el" href="group___ex_str_buffer.html#ga1e5b0e4e15d5497c17b972d34126a715">croc_ex_buffer_prepare</a> to the buffer. </p>
<p>After calling this, the buffer will be back into its normal mode, and the stack slot that <a class="el" href="group___ex_str_buffer.html#ga1e5b0e4e15d5497c17b972d34126a715">croc_ex_buffer_prepare</a> may have allocated will be gone. The stack must be in the same configuration as it was after <code>croc_ex_buffer_prepare</code> was called. </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 15 2014 10:46:48 for Croc by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</div> <!-- container -->
</body>
</html>
