<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Croc: Exceptions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="crocstyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="container">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<img src="http://jfbillingsley.com/croc/chrome/site/banner.gif" alt="The Croc Programming Language" />
<!-- <table cellspacing="0" cellpadding="0"> -->
 <!-- <tbody> -->
 <!-- <tr style="height: 56px;"> -->
  <!-- <td style="padding-left: 0.5em;"> -->
   <!-- <div id="projectname">Croc -->
   <!-- </div> -->
   <!--<div id="projectbrief">The Croc Programming Language</div>-->
  <!-- </td> -->
 <!-- </tr> -->
 <!-- </tbody> -->
<!-- </table> -->
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>API</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Exceptions<div class="ingroups"><a class="el" href="group___a_p_i.html">API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga88ba16880d1349514886e02dfc9731a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_h.html#ga88ba16880d1349514886e02dfc9731a1">croc_eh_throw</a> (<a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *t)</td></tr>
<tr class="separator:ga88ba16880d1349514886e02dfc9731a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59c426aeb7a518c959e9ad854403e570"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_h.html#ga59c426aeb7a518c959e9ad854403e570">croc_eh_rethrow</a> (<a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *t)</td></tr>
<tr class="separator:ga59c426aeb7a518c959e9ad854403e570"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga86a9c27196b092d3c92237943f54f972"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_h.html#ga86a9c27196b092d3c92237943f54f972">croc_eh_pushStd</a> (<a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *t, const char *exName)</td></tr>
<tr class="separator:ga86a9c27196b092d3c92237943f54f972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3f1b71439b32e41c2d66c32171fa239"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_h.html#gae3f1b71439b32e41c2d66c32171fa239">croc_eh_throwStd</a> (<a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *t, const char *exName, const char *fmt,...)</td></tr>
<tr class="separator:gae3f1b71439b32e41c2d66c32171fa239"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e711d87f130495c895cf41c82c20b34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_h.html#ga5e711d87f130495c895cf41c82c20b34">croc_eh_vthrowStd</a> (<a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *t, const char *exName, const char *fmt, va_list args)</td></tr>
<tr class="separator:ga5e711d87f130495c895cf41c82c20b34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f455eb584800f870a8cefb83d113ad4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_h.html#ga0f455eb584800f870a8cefb83d113ad4">croc_eh_pushLocationClass</a> (<a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *t)</td></tr>
<tr class="separator:ga0f455eb584800f870a8cefb83d113ad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0db9aeb3e9935ccbf01619b87b962bbe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_h.html#ga0db9aeb3e9935ccbf01619b87b962bbe">croc_eh_pushLocationObject</a> (<a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *t, const char *file, int line, int col)</td></tr>
<tr class="separator:ga0db9aeb3e9935ccbf01619b87b962bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82f1f2c615abe08dd33a72397eb41cd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_h.html#ga82f1f2c615abe08dd33a72397eb41cd5">croc_eh_setUnhandledExHandler</a> (<a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *t)</td></tr>
<tr class="separator:ga82f1f2c615abe08dd33a72397eb41cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Throwing exceptions, and more. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga88ba16880d1349514886e02dfc9731a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a> croc_eh_throw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Throws the value on top of the stack as an exception. </p>
<p>It must be an <code>instance</code> to be throwable.</p>
<dl class="section return"><dt>Returns</dt><dd>a dummy value (this function doesn't actually return) so that you can use it like so:</dd></dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span>(blah blah)</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="group___e_h.html#ga88ba16880d1349514886e02dfc9731a1">croc_eh_throw</a>(t);</div>
</div><!-- fragment --><p>This can avoid having to put dummy returns in native functions that end by throwing an exception. </p>

</div>
</div>
<a class="anchor" id="ga59c426aeb7a518c959e9ad854403e570"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a> croc_eh_rethrow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rethrows the value on top of the stack as an exception. </p>
<p>The only difference between this and <a class="el" href="group___e_h.html#ga88ba16880d1349514886e02dfc9731a1">croc_eh_throw</a> is that this will not modify the exception's traceback info (if any).</p>
<p>You will most likely use this after catching an exception with <a class="el" href="group___calls.html#ga0dd0b7f464ba87bab25d991709711f0b">croc_tryCall</a> or <a class="el" href="group___calls.html#ga4e89a6bd359a72d35e2205c047863f79">croc_tryMethodCall</a>, like so:</p>
<div class="fragment"><div class="line"><span class="comment">// do some stuff here which needs to be cleaned up</span></div>
<div class="line">result = <a class="code" href="group___calls.html#ga0dd0b7f464ba87bab25d991709711f0b">croc_tryCall</a>(t, 3, 1);</div>
<div class="line"><span class="comment">// do some stuff here to clean up</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span>(result &lt; 0)</div>
<div class="line">    <a class="code" href="group___e_h.html#ga59c426aeb7a518c959e9ad854403e570">croc_eh_rethrow</a>(t);</div>
</div><!-- fragment --><p>In this way, you can imitate the behavior of "finally" blocks in native code.</p>
<dl class="section return"><dt>Returns</dt><dd>a dummy value like <a class="el" href="group___e_h.html#ga88ba16880d1349514886e02dfc9731a1">croc_eh_throw</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga86a9c27196b092d3c92237943f54f972"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a> croc_eh_pushStd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pushes one of the standard exception classes (as defined in the Croc <code>exceptions</code> module) onto the stack. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exName</td><td>is the name of the class you want. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the stack index of the newly-pushed class. </dd></dl>

</div>
</div>
<a class="anchor" id="gae3f1b71439b32e41c2d66c32171fa239"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a> croc_eh_throwStd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A convenience function for throwing one of the standard exception types. </p>
<p>This basically pushes the standard exception class, pushes the formatted parameters, instantiates the class, and throws the resulting instance. For example:</p>
<div class="fragment"><div class="line"><a class="code" href="group___e_h.html#gae3f1b71439b32e41c2d66c32171fa239">croc_eh_throwStd</a>(t, <span class="stringliteral">&quot;RangeError&quot;</span>, <span class="stringliteral">&quot;The value &#39;%d&#39; must be between 0 and 100&quot;</span>, val);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exName</td><td>is the name of the standard exception class that you want to throw. </td></tr>
    <tr><td class="paramname">fmt</td><td>is the format string. This works just like <code>printf</code> and will call <a class="el" href="group___value_types.html#ga99d93f89bf612541dff9149b9ca7748b">croc_vpushFormat</a> internally. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a dummy value like <a class="el" href="group___e_h.html#ga88ba16880d1349514886e02dfc9731a1">croc_eh_throw</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5e711d87f130495c895cf41c82c20b34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a> croc_eh_vthrowStd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Just like <a class="el" href="group___e_h.html#gae3f1b71439b32e41c2d66c32171fa239">croc_eh_throwStd</a> but takes a <code>va_list</code> instead of variadic arguments. </p>
<dl class="section return"><dt>Returns</dt><dd>a dummy value like <a class="el" href="group___e_h.html#ga88ba16880d1349514886e02dfc9731a1">croc_eh_throw</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0f455eb584800f870a8cefb83d113ad4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a> croc_eh_pushLocationClass </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pushes the <code>Location</code> class as defined in the Croc <code>exceptions</code> module. </p>
<dl class="section return"><dt>Returns</dt><dd>the stack index of the newly-pushed class. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0db9aeb3e9935ccbf01619b87b962bbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___a_p_i_types.html#gab14ee9a38c2105a6776912612194c348">word_t</a> croc_eh_pushLocationObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pushes an instance of the <code>Location</code> class, passing the given values to the constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>is the location's filename. </td></tr>
    <tr><td class="paramname">line</td><td>is the line number, or 0 to mean a line couldn't be determined. </td></tr>
    <tr><td class="paramname">col</td><td>is either &gt; 0 to mean the column number in a compiler location, or &lt;= 0 to mean something else. The values of the <a class="el" href="group___a_p_i_types.html#gadca4e6330bf18b1e0b2a5ecd34945094">CrocLocation</a> enum can be used for this. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the stack index of the newly-pushed instance. </dd></dl>

</div>
</div>
<a class="anchor" id="ga82f1f2c615abe08dd33a72397eb41cd5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void croc_eh_setUnhandledExHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the function which will be called if an exception is thrown outside of any exception handling frame. </p>
<p>This can occur if an error occurs in native code outside any EH frames, such as at the top level of your program. For example, this would cause an unhandled exception:</p>
<div class="fragment"><div class="line"><a class="code" href="group___a_p_i_types.html#ga6a1f60650d3a078e26815cda6fd01d18">CrocThread</a>* t = <a class="code" href="group___v_minit.html#ga1e9725b13de494088807a4f21232f771">croc_vm_openDefault</a>();</div>
<div class="line"><a class="code" href="group___basic.html#gafdc7bab29a305175ee554414496766bf">croc_cat</a>(t, 10); <span class="comment">// throws an ApiError, but there is no EH frame to catch it!</span></div>
</div><!-- fragment --><p>When an unhandled exception occurs, all threads that were running or waiting will be dead, and the unhandled exception handler will be called on the main thread with the offending exception as its only parameter. When the unhandled exception handler returns, the C <code>abort()</code> function is called. If you don't want this to happen, you'll have to set your own unhandled exception handler which uses <code>longjmp</code> to jump somewhere else. Better yet, set up an EH frame around the top level of your code using <a class="el" href="group___calls.html#ga0dd0b7f464ba87bab25d991709711f0b">croc_tryCall</a> so you can handle exceptions properly.</p>
<p>By default there is a handler set up which simply prints out the offending exception and traceback.</p>
<p>This function expects the new handler function to be on top of the stack. It will set this function as the unhandled exception handler, and will replace the value on top of the stack with the previous handler. </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 15 2014 10:46:48 for Croc by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</div> <!-- container -->
</body>
</html>
