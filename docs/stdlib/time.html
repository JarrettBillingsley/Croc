<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="text/javascript" http-equiv="content-script-type"><title>module time</title><link rel="stylesheet" type="text/css" href="candydoc/style.css"><link rel="stylesheet" type="text/css" href="candydoc/code.css"><script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script><script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script><script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script></head><body><div id="everything"><div id="tabarea"></div><div id="explorerclient"></div><div id="content"><script>explorer.initialize("time");</script>	<img src="candydoc/img/banner.gif" alt="The Croc Programming Language"></img>	<div id="docbody">		<h1>module time</h1><p>This module covers two broad use cases: timing how long something takes, and getting the real (clock) time. These two cases are treated separately as different OSes offer differing levels of resolution and accuracy depending on how you want to deal with time.</p><p>This module doesn't go into complex things like dealing with timezones, calendars other than Gregorian, complex international time and date formatting etc. These things would be much better dealt with through an internationalization library.</p><script>explorer.outline.incSymbolLevel();</script><dl><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="microTime"></a>global function microTime()<script>explorer.outline.addDecl("microTime");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p><strong>Returns:</strong> <p>an integer which is a microseond-accurate count of some kind. The values returned by this function can be used to accurately measure how long something takes, like so:</p><p><div class="code"><pre><span class="k">local</span> <span class="n">start</span> <span class="p">=</span> <span class="n">time</span><span class="p">.</span><span class="n">microTime</span><span class="p">()</span>
<span class="n">doSomethingThatTakesAWhile</span><span class="p">()</span>
<span class="k">local</span> <span class="n">end</span> <span class="p">=</span> <span class="n">time</span><span class="p">.</span><span class="n">microTime</span><span class="p">()</span>
<span class="n">writefln</span><span class="p">(</span><span class="s">&quot;Took {} milliseconds&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">end</span> <span class="p">-</span> <span class="n">start</span><span class="p">)</span> <span class="p">/</span> <span class="mf">1000.0</span><span class="p">)</span>
</pre></div>
The times returned by this function are not necessarily synchronized to any external time source. That is, don't assume the values returned mean something like "this many seconds since the computer turned on". You should only use values from this function to time things like shown above.</p><p><strong>See:</strong> <p><a href="time.html#Timer">Timer</a> for a simple class that wraps this in a simpler interface.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="timex"></a>global function timex(f)<script>explorer.outline.addDecl("timex");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>Given any callable value <tt>f</tt>, calls <tt>f</tt> and measures how long it takes to complete.</p><p><strong>Returns:</strong> <p>an integer representing the elapsed time in microseconds.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="clockTime"></a>global function clockTime()<script>explorer.outline.addDecl("clockTime");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p><strong>Returns:</strong> <p>an integer which is a count of the number of microseconds since the Unix epoch (1 Jan 1970). <strong>Important:</strong> just because this function returns microseconds does not mean it is actually accurate to the microsecond!</p><p>Since this time is relative to an external reference, it's good for things like timestamps or displaying the time to the user. These sorts of times rarely need true microsecond accuracy anyway.</p><p>To convert a raw clock time into separate date and time components (month, day, hours, minutes etc.) see <a href="time.html#timeToTableLocal">timeToTableLocal</a> and <a href="time.html#timeToTableUTC">timeToTableUTC</a>.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="timeToTableUTC"></a>global function timeToTableUTC(time: int = null, ret: table = null)<script>explorer.outline.addDecl("timeToTableUTC");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>Converts a clock time (such as returned from <a href="time.html#clockTime">clockTime</a>) into a table which holds the the date and time according to the Gregorian calendar. The time components given will be in UTC time. For local time, see <a href="time.html#timeToTableLocal">timeToTableLocal</a>.</p><p><strong>Params:</strong> <table class="params"><tr><td class="paramname" nowrap valign="top" style="padding-right: 8px">time</td><td><p>is the time to convert. If you pass nothing or null for this parameter, the current clock time will be used instead.</p></td></tr><tr><td class="paramname" nowrap valign="top" style="padding-right: 8px">ret</td><td><p>is an optional result table. If you pass a table for this parameter, the time components will be inserted into this table. Otherwise, a new table object will be allocated and returned.</p></td></tr></table><p><strong>Returns:</strong> <p>a table (or <tt>ret</tt> if it was passed) containing the following fields:</p><p><dl><dt><tt>"year"</tt></dt><dd><p>the year.</p></dd><dt><tt>"month"</tt></dt><dd><p>the month, 1-12.</p></dd><dt><tt>"day"</tt></dt><dd><p>the day, 1-31.</p></dd><dt><tt>"hour"</tt></dt><dd><p>the hour, 0-23.</p></dd><dt><tt>"min"</tt></dt><dd><p>the minute, 0-59.</p></dd><dt><tt>"sec"</tt></dt><dd><p>the second, 0-60. Yes, 60, because of leap seconds.</p></dd><dt><tt>"msec"</tt></dt><dd><p>the milliseconds, 0-999.</p></dd></dl></p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="timeToTableLocal"></a>global function timeToTableLocal(time: int = null, ret: table = null)<script>explorer.outline.addDecl("timeToTableLocal");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>Just like <a href="time.html#timeToTableUTC">timeToTableUTC</a>, except the fields in the returned table will be calculated according to the local timezone instead of UTC.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="timeFromTableUTC"></a>global function timeFromTableUTC(tab: table)<script>explorer.outline.addDecl("timeFromTableUTC");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>The inverse of <a href="time.html#timeToTableUTC">timeToTableUTC</a>, converts a table with the appropriate fields into a integer clock time value. The time components of the table are interpreted as being in UTC.</p><p><strong>Params:</strong> <table class="params"><tr><td class="paramname" nowrap valign="top" style="padding-right: 8px">tab</td><td><p>should contain the date and time to be converted, in a similar format as returned from <a href="time.html#timeToTableUTC">timeToTableUTC</a>. The table must have integer fields <tt>"year"</tt>, <tt>"month"</tt>, and <tt>"day"</tt>. The other fields are optional, but if you give one of <tt>"hour"</tt>, <tt>"min"</tt>, or <tt>"sec"</tt>, you must give them all.</p><p>These are the valid sets of fields <tt>tab</tt> may have, and how they are interpreted:</p><p><ul><li><p>Just <tt>"year"</tt>, <tt>"month"</tt>, and <tt>"day"</tt>: interpreted as 00:00:00.000 on the given date.</p></li><li><p>The above, plus <tt>"hour"</tt>, <tt>"min"</tt>, and <tt>"sec"</tt>: interpreted as HH:MM:SS.000 on the given date.</p></li><li><p>The above, plus <tt>"msec"</tt>: the full, millisecond-accurate time and date.</p></li></ul></p></td></tr></table><p><strong>Returns:</strong> <p>an integer of the same kind returned from <a href="time.html#clockTime">clockTime</a>.</p><p><strong>Throws:</strong> <table class="params"><tr><td class="paramname" nowrap valign="top" style="padding-right: 8px"><a href="exceptions.html#ValueError">ValueError</a></td><td><p>if <tt>tab</tt> is invalid in any way.</p></td></tr></table></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="timeFromTableLocal"></a>global function timeFromTableLocal(tab: table)<script>explorer.outline.addDecl("timeFromTableLocal");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>The inverse of <a href="time.html#timeToTableLocal">timeToTableLocal</a>. This works just like <a href="time.html#timeFromTableUTC">timeFromTableUTC</a> except it interprets the time components of <tt>tab</tt> as local time instead of UTC.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="Timer"></a>class Timer<script>explorer.outline.addDecl("Timer");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>A small helper class which acts like a stopwatch. You can start it, and it will count time up from that point. When you stop it, it will add the elapsed time between the start and stop calls to its accumulated time. You can then start and stop it again as many times as you want.</p><p>This wraps the <a href="time.html#microTime">microTime</a> function so it gives microsecond-precise timings.</p><p><strong>Examples:</strong> <p><div class="code"><pre><span class="k">local</span> <span class="n">t</span> <span class="p">=</span> <span class="n">time</span><span class="p">.</span><span class="n">Timer</span><span class="p">()</span>
<span class="n">t</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">somethingThatTakes100Microseconds</span><span class="p">()</span>
<span class="n">t</span><span class="p">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">writeln</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="c1">// prints 100</span>
<span class="n">t</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">somethingThatTakes300Microseconds</span><span class="p">()</span>
<span class="n">t</span><span class="p">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">writeln</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="c1">// prints 400</span>
<span class="n">t</span><span class="p">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">writeln</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="c1">// prints 0</span>
</pre></div>
</p><script>explorer.outline.incSymbolLevel();</script><dl><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="Timer.start"></a>function Timer.start()<script>explorer.outline.addDecl("Timer.start");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>Starts the timer, or if it's already running, does nothing.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="Timer.stop"></a>function Timer.stop()<script>explorer.outline.addDecl("Timer.stop");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>Stops the timer, or if it's not running, does nothing.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="Timer.reset"></a>function Timer.reset()<script>explorer.outline.addDecl("Timer.reset");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>Stops the timer and resets its accumulated time to 0.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="Timer.time"></a>function Timer.time()<script>explorer.outline.addDecl("Timer.time");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p><strong>Returns:</strong> <p>the total time elapsed on this timer. If this timer is running, returns the accumulated time plus any time since the last call to <a href="time.html#Timer.start">start</a>. If this timer is stopped, just returns the total accumulated time.</p></dd></dl><script>explorer.outline.decSymbolLevel();</script></dd></dl><script>explorer.outline.decSymbolLevel();</script>	</div><div id="docfooter">		HTML and JavaScript source derived from 		<img src="candydoc/img/candydoc.gif" style="vertical-align:middle; position:relative; top:-1px">		by Victor Nakoryakov; Page generated on 15 Nov 2014 10:28:14	</div></div><script>	explorer.packageExplorer.addModuleFull("array");	explorer.packageExplorer.addModuleFull("ascii");	explorer.packageExplorer.addModuleFull("compiler");	explorer.packageExplorer.addModuleFull("console");	explorer.packageExplorer.addModuleFull("debug");	explorer.packageExplorer.addModuleFull("devil");	explorer.packageExplorer.addModuleFull("docs");	explorer.packageExplorer.addModuleFull("doctools.console");	explorer.packageExplorer.addModuleFull("doctools.output");	explorer.packageExplorer.addModuleFull("doctools.trac");	explorer.packageExplorer.addModuleFull("env");	explorer.packageExplorer.addModuleFull("exceptions");	explorer.packageExplorer.addModuleFull("file");	explorer.packageExplorer.addModuleFull("gc");	explorer.packageExplorer.addModuleFull("gl");	explorer.packageExplorer.addModuleFull("glfw");	explorer.packageExplorer.addModuleFull("hash");	explorer.packageExplorer.addModuleFull("imgui");	explorer.packageExplorer.addModuleFull("json");	explorer.packageExplorer.addModuleFull("math");	explorer.packageExplorer.addModuleFull("memblock");	explorer.packageExplorer.addModuleFull("modules");	explorer.packageExplorer.addModuleFull("object");	explorer.packageExplorer.addModuleFull("openal");	explorer.packageExplorer.addModuleFull("os");	explorer.packageExplorer.addModuleFull("path");	explorer.packageExplorer.addModuleFull("pcre");	explorer.packageExplorer.addModuleFull("repl");	explorer.packageExplorer.addModuleFull("serialization");	explorer.packageExplorer.addModuleFull("stream");	explorer.packageExplorer.addModuleFull("string");	explorer.packageExplorer.addModuleFull("text");	explorer.packageExplorer.addModuleFull("thread");	explorer.packageExplorer.addModuleFull("time");</script></div></body></html>