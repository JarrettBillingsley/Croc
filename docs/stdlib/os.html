<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="text/javascript" http-equiv="content-script-type"><title>module os</title><link rel="stylesheet" type="text/css" href="candydoc/style.css"><link rel="stylesheet" type="text/css" href="candydoc/code.css"><script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script><script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script><script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script></head><body><div id="everything"><div id="tabarea"></div><div id="explorerclient"></div><div id="content"><script>explorer.initialize("os");</script>	<img src="candydoc/img/banner.gif" alt="The Croc Programming Language"></img>	<div id="docbody">		<h1>module os</h1><p>This module contains some unsafe operating system interfaces for things like spawning processes.</p><script>explorer.outline.incSymbolLevel();</script><dl><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="haveShell"></a>global function haveShell()<script>explorer.outline.addDecl("haveShell");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p><strong>Returns:</strong> <p>a bool indicating whether or not there is a shell command processor available. If there is, you can use the <a href="os.html#shellCmd">shellCmd</a> function to run shell commands.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="shellCmd"></a>global function shellCmd(cmd: string)<script>explorer.outline.addDecl("shellCmd");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>Executes the string <tt>cmd</tt> through the system's shell command processor, spawning a subprocess. Execution of the calling process waits until the subprocess completes.</p><p><strong>Returns:</strong> <p>the exit code from the subprocess as an integer. The meaning of this code is platform-dependent.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="sleep"></a>global function sleep(duration: float)<script>explorer.outline.addDecl("sleep");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>Pauses execution of the current system thread for at least <tt>duration</tt> seconds.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="Process"></a>class Process<script>explorer.outline.addDecl("Process");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>This class lets you spawn external processes asynchronously and communicate with them in a one-way fashion.</p><p>You can only have access to either its stdin or its stdout stream, but not both. This is because attempting to imitate a tty programmatically is asking for deadlocks because of buffering in C stdio. Or something like that.</p><p>If you need to give the subprocess both input and output, you'll have to use an intermediate file and redirect it in the command line you pass in the constructor.</p><p><strong>Examples:</strong> <p>Here's a simple program that just lists the current directory and prints it to stdout.</p><p><div class="code"><pre><span class="k">local</span> <span class="n">p</span> <span class="p">=</span> <span class="n">os</span><span class="p">.</span><span class="n">Process</span><span class="p">(</span><span class="s">&quot;ls .&quot;</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">)</span>
<span class="n">console</span><span class="p">.</span><span class="n">stdout</span><span class="p">.</span><span class="n">getStream</span><span class="p">().</span><span class="n">copy</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">stream</span><span class="p">())</span>
<span class="n">writeln</span><span class="p">(</span><span class="s">&quot;Exited with code &quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">wait</span><span class="p">())</span>
</pre></div>
</p><script>explorer.outline.incSymbolLevel();</script><dl><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="Process.this"></a>Process.this(cmd: string, mode: string)<script>explorer.outline.addDecl("Process.this");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>Starts a new subprocess.</p><p><strong>Params:</strong> <table class="params"><tr><td class="paramname" nowrap valign="top" style="padding-right: 8px">cmd</td><td><p>is the command line which will be executed through the shell. As such you can use things like redirection and piping. You'll have to use redirection for either input or output if you need both input and output.</p></td></tr><tr><td class="paramname" nowrap valign="top" style="padding-right: 8px">mode</td><td><p>should be either <tt>"r"</tt> or <tt>"w"</tt>. If it's <tt>"r"</tt>, the subprocess will inherit this process's stdin stream, and its stdout will be redirected to a pipe which you can get with the <a href="os.html#Process.stream">stream</a> method. If it's <tt>"w"</tt>, the subprocess will inherit this process's stdout stream, and its stdin will be redirected instead.</p></td></tr></table></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="Process.finalizer"></a>function Process.finalizer()<script>explorer.outline.addDecl("Process.finalizer");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>Closes the subprocess if it hasn't been already.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="Process.wait"></a>function Process.wait()<script>explorer.outline.addDecl("Process.wait");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>Waits for the subprocess to complete (if it hasn't yet already) and returns its exit code as an integer.</p><p>This will block as long as necessary.</p></dd><script>explorer.outline.writeEnabled = true;</script><dt><span class="decl"><a id="Process.stream"></a>function Process.stream()<script>explorer.outline.addDecl("Process.stream");</script></span><script>explorer.outline.writeEnabled = false;</script></dt><dd><p>Gets a <a href="stream.html#NativeStream">stream.NativeStream</a> instance which represents whichever standard stream was redirected in the subprocess (see the <a href="os.html#Process.constructor">constructor</a> for info).</p></dd></dl><script>explorer.outline.decSymbolLevel();</script></dd></dl><script>explorer.outline.decSymbolLevel();</script>	</div><div id="docfooter">		HTML and JavaScript source derived from 		<img src="candydoc/img/candydoc.gif" style="vertical-align:middle; position:relative; top:-1px">		by Victor Nakoryakov; Page generated on 15 Nov 2014 10:28:14	</div></div><script>	explorer.packageExplorer.addModuleFull("array");	explorer.packageExplorer.addModuleFull("ascii");	explorer.packageExplorer.addModuleFull("compiler");	explorer.packageExplorer.addModuleFull("console");	explorer.packageExplorer.addModuleFull("debug");	explorer.packageExplorer.addModuleFull("devil");	explorer.packageExplorer.addModuleFull("docs");	explorer.packageExplorer.addModuleFull("doctools.console");	explorer.packageExplorer.addModuleFull("doctools.output");	explorer.packageExplorer.addModuleFull("doctools.trac");	explorer.packageExplorer.addModuleFull("env");	explorer.packageExplorer.addModuleFull("exceptions");	explorer.packageExplorer.addModuleFull("file");	explorer.packageExplorer.addModuleFull("gc");	explorer.packageExplorer.addModuleFull("gl");	explorer.packageExplorer.addModuleFull("glfw");	explorer.packageExplorer.addModuleFull("hash");	explorer.packageExplorer.addModuleFull("imgui");	explorer.packageExplorer.addModuleFull("json");	explorer.packageExplorer.addModuleFull("math");	explorer.packageExplorer.addModuleFull("memblock");	explorer.packageExplorer.addModuleFull("modules");	explorer.packageExplorer.addModuleFull("object");	explorer.packageExplorer.addModuleFull("openal");	explorer.packageExplorer.addModuleFull("os");	explorer.packageExplorer.addModuleFull("path");	explorer.packageExplorer.addModuleFull("pcre");	explorer.packageExplorer.addModuleFull("repl");	explorer.packageExplorer.addModuleFull("serialization");	explorer.packageExplorer.addModuleFull("stream");	explorer.packageExplorer.addModuleFull("string");	explorer.packageExplorer.addModuleFull("text");	explorer.packageExplorer.addModuleFull("thread");	explorer.packageExplorer.addModuleFull("time");</script></div></body></html>