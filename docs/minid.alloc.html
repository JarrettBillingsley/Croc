
<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="text/javascript" http-equiv="content-script-type">
<title>minid.alloc</title>
<link rel="stylesheet" type="text/css" href="candydoc/style.css">
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="candydoc/ie56hack.css"><![endif]-->
<script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script>
</head><body>
<div id="tabarea"></div><div id="explorerclient"></div>
<div id="content"><script>explorer.initialize("minid.alloc");</script>
	<table class="content">
		<tr><td id="docbody"><h1>minid.alloc</h1><!-- Generated by Ddoc from minid\alloc.d -->
This contains the memory allocator interface for MiniD.  Most of this module is
for internal use only, but it does define the type of the memory allocation
function which you can pass to minid.api.openVM.
<br><br>
<b>License:</b><br><pre class="license">Copyright (c) 2008 Jarrett Billingsley
<br><br>

This software is provided 'as-is', without any express or implied warranty.
In no event will the authors be held liable for any damages arising from the
use of this software.
<br><br>

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it freely,
subject to the following restrictions:
<br><br>

    1. The origin of this software must not be misrepresented; you must not
	claim that you wrote the original software. If you use this software in a
	product, an acknowledgment in the product documentation would be
	appreciated but is not required.
<br><br>

    2. Altered source versions must be plainly marked as such, and must not
	be misrepresented as being the original software.
<br><br>

    3. This notice may not be removed or altered from any source distribution.
</pre><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">alias 
<span class="currsymbol">MemFunc</span>
<script>explorer.outline.addDecl('MemFunc');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>The type of the memory allocation function that the MiniD library uses to allocate, reallocate, and free memory.
You pass a memory allocation function when you create a VM, and all allocations by the VM go through that function.
<br><br>
This type is defined as a void* function(void* ctx, void* p, size_t oldSize, size_t newSize).
<br><br>

The memory function works as follows:
<br><br>

If a new block is being requested, it will be called with a p of <b>null</b>, an oldSize of 0, and a newSize of the size of
the requested block.
<br><br>

If an existing block is to be resized, it will be called with p being the pointer to the block, an oldSize of the current
block size, and a newSize of the new expected size of the block.
<br><br>

If an existing block is to be deallocated, it will be called with p being the pointer to the block, an oldSize of the
current block size, and a newSize of 0.

<br><br>
<b>Params:</b><br><table class="params"><tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">ctx</td>

               
<td>The context pointer that was associated with the VM upon creation.  This pointer is just passed to the allocation
		function on every call; MiniD doesn't use it.</td></tr>
<tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">p</td>

               
<td>The pointer that is being operated on.  If this is <b>null</b>, an allocation is being requested.  Otherwise, either a
		reallocation or a deallocation is being requested.</td></tr>
<tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">oldSize</td>

               
<td>The current size of the block pointed to by p.  If p is <b>null</b>, this will always be 0.</td></tr>
<tr>
<td class = "paramname" nowrap valign="top" style="padding-right: 8px">newSize</td>

               
<td>The new size of the block pointed to by p.  If p is <b>null</b>, this is the requested size of the new block.
		Otherwise, if this is 0, a deallocation is being requested.  Otherwise, a reallocation is being requested.</td></tr>
</table><br>
<b>Returns:</b><br>
If a deallocation was requested, should return <b>null</b>.  Otherwise, should return a <b>non-<b>null</b></b> pointer.  If memory cannot
	be allocated, the memory allocation function should throw an exception, not return <b>null</b>.
<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</td></tr>
		<tr><td id="docfooter">
			Page was generated with
			<img src="candydoc/img/candydoc.gif" style="vertical-align:middle; position:relative; top:-1px">
			on Thu Jul 16 22:47:45 2009

		</td></tr>
	</table>
</div>
<script>
	explorer.packageExplorer.addModuleFull("minid.alloc");
	explorer.packageExplorer.addModuleFull("minid.api");
	explorer.packageExplorer.addModuleFull("minid.ast");
	explorer.packageExplorer.addModuleFull("minid.bind");
	explorer.packageExplorer.addModuleFull("minid.commandline");
	explorer.packageExplorer.addModuleFull("minid.compiler");
	explorer.packageExplorer.addModuleFull("minid.ex");
	explorer.packageExplorer.addModuleFull("minid.interpreter");
	explorer.packageExplorer.addModuleFull("minid.serialization");
	explorer.packageExplorer.addModuleFull("minid.types");
	explorer.packageExplorer.addModuleFull("minid.utils");
	explorer.packageExplorer.addModuleFull("minid.vm");</script>
</body></html>


